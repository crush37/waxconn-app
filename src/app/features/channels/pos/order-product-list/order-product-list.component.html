<mat-card class="px-0 pb-0 h-full rounded-none sm:rounded-lg">

  <app-data-list [searchConfig]="searchConfig" [pageSizeOptions]="[]" [paginated]="false" [viewMode]="viewMode">
    <ng-template #beforeSearchActions>
      <div class="inline-flex self-center justify-self-end mr-4">
        <button (click)="close()" color="primary" mat-icon-button>
          <mat-icon>arrow_back</mat-icon>
        </button>
      </div>
    </ng-template>

    <ng-template #afterSearchActions>
      <div class="hidden md:inline-flex self-center justify-self-end ml-4">
        <button (click)="setView('list')" [ngClass]="{'bg-amber-400': viewMode === 'list'}" color="primary" mat-icon-button>
          <mat-icon>list</mat-icon>
        </button>
      </div>

      <div class="hidden md:inline-flex self-center justify-self-end pl-1">
        <button (click)="setView('grid')" [ngClass]="{'bg-amber-400': viewMode === 'grid'}" color="primary" mat-icon-button>
          <mat-icon>grid_view</mat-icon>
        </button>
      </div>
    </ng-template>

    <ng-template *ngIf="viewMode === 'list'" #header>
      <th class="w-full p-4 pt-0 text-left"></th>
    </ng-template>

    <ng-template *ngIf="viewMode === 'list'" #row let-row="row">
      <tr (click)="select(row)" class="hover:bg-gray-50 border-b cursor-pointer">

        <td class="p-4 text-left flex items-center">
          <img src="{{ g(row).thumb  || imagePlaceholder }}" style="height: 60px; width: 60px; min-width: 60px;"
               height="60" width="60" (error)="onImgError($event)" class="mr-4" alt="">
          <div class="flex-1 pr-4 items-center">
            <strong>{{ g(row).artist }}</strong> ({{ g(row).type }})<br>
            {{ g(row).title }}
          </div>
          <div class="text-right">
            {{ g(row).price | currency }}<br>
            <strong *ngIf="!availableOnPosChannel(row); else available" class="text-yellow-800">not available in channel</strong>
            <ng-template #available>
              <strong *ngIf="g(row).status !== 'draft'">{{ inventoryCount(row) }} in stock</strong>
              <strong *ngIf="g(row).status === 'draft'" class="text-yellow-800">draft</strong>
            </ng-template>
          </div>

          <div class="pt-1 pl-4">
            <mat-icon
              [ngClass]="inventoryCount(row) > 0 &&  g(row).status !== 'draft' && availableOnPosChannel(row) ? 'text-green-700' : 'text-gray-400'">
              add_box
            </mat-icon>
          </div>
        </td>
      </tr>
    </ng-template>

    <ng-template *ngIf="viewMode === 'grid'" #row let-row="row">
      <div (click)="select(row)" class="hover:bg-gray-50 border cursor-pointer inline-flex mr-2">
        <div class="text-left items-center">
          <img src="{{ g(row).thumb  || imagePlaceholder }}" style="height: 150px; width: 150px; min-width: 60px;"
               height="150" width="150" (error)="onImgError($event)" alt="">
        </div>
      </div>
    </ng-template>
  </app-data-list>

</mat-card>
